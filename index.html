<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vitória Cestas | Estoque</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app-frame">
    <aside class="sidebar">
      <div class="sidebar__brand">
        <div class="brand-dot"></div>
        <div>
          <strong>Vitória Cestas</strong>
          <small>Backoffice</small>
        </div>
      </div>
      <nav class="nav">
        <button class="nav__item nav__item--active" data-page-target="dashboardPage">
          <span>Início</span>
        </button>
        <button class="nav__item" data-page-target="itemsPage">
          <span>Itens</span>
        </button>
        <button class="nav__item" data-page-target="suppliersPage">
          <span>Fornecedores</span>
        </button>
        <button class="nav__item" data-page-target="customersPage">
          <span>Clientes</span>
        </button>
        <button class="nav__item" data-page-target="addressesPage">
          <span>Endereços</span>
        </button>
        <button class="nav__item" data-page-target="phonesPage">
          <span>Telefones</span>
        </button>
      </nav>
      <div class="sidebar__cta">
        <p>Documentação</p>
        <button id="docsBtn" class="btn btn--ghost">Abrir</button>
      </div>
    </aside>

    <div class="workspace">
      <header class="hero">
        <div class="hero__content">
          <p class="hero__eyebrow">Como funciona</p>
          <h1>Organize o estoque em minutos</h1>
          <p class="hero__lead">
            Cadastre itens, fornecedores e clientes em um só lugar. Cada item ganha um pequeno dashboard, com opção de exportar o estoque para Excel e anexar imagens em blob para o backend.
          </p>
          <div class="hero__actions">
            <button id="docsBtnHeader" class="btn btn--ghost">Ver documentação</button>
          </div>
          <p class="hero__hint">Últimas inclusões aparecem no painel principal. Login fica disponível logo abaixo, quando precisar.</p>
        </div>
        <div class="hero__panel">
          <p class="hero__panel-title">Destaques rápidos</p>
          <ol>
            <li>Menu lateral simplifica a navegação entre cadastros.</li>
            <li>Dashboard de cada item com total, preço e imagem.</li>
            <li>Exportação direta para Excel/CSV.</li>
            <li>Upload de imagem em blob (Data URL) junto ao item.</li>
          </ol>
        </div>
      </header>

      <main class="layout">
        <section class="card card--wide login-panel" id="loginCard">
          <div class="card__header card__header--row">
            <div>
              <h2>Acesso do time</h2>
              <p class="muted">Use seu login quando precisar liberar cadastros e dashboards protegidos.</p>
            </div>
            <div class="pill" id="authStatus">Não autenticado</div>
          </div>
          <form id="loginForm" class="form form--inline">
            <label class="form__field">
              <span>Email</span>
              <input type="email" name="email" placeholder="email@exemplo.com" required />
            </label>
            <label class="form__field">
              <span>Senha</span>
              <input type="password" name="password" placeholder="••••••••" required />
            </label>
            <button type="submit" class="btn btn--primary">Entrar</button>
          </form>
        </section>

        <section class="card card--wide" id="appShell" hidden>
          <div class="shell__bar">
            <div class="tabs" id="pageTabs" aria-hidden="true"></div>
            <button type="button" class="btn btn--ghost" id="logoutBtn">Sair</button>
          </div>
        </section>

        <section class="card card--wide page" id="dashboardPage" data-page>
          <div class="card__header card__header--row">
            <div>
              <h2>Painel principal</h2>
              <p class="muted">Veja rapidamente os cadastros mais recentes.</p>
            </div>
          </div>

          <div class="grid">
            <div class="stack">
              <div class="stack__header">
                <h3>Últimos itens</h3>
                <button class="btn btn--ghost" id="refreshItems">Atualizar</button>
              </div>
              <div id="itemsList" class="list">Os itens mais recentes aparecem aqui após carregar o painel.</div>
            </div>

            <div class="stack">
              <div class="stack__header">
                <h3>Fornecedores recentes</h3>
                <button class="btn btn--ghost" id="refreshSuppliers">Atualizar</button>
              </div>
              <div id="suppliersList" class="list">Últimas inclusões ficam disponíveis após carregar o painel.</div>
            </div>
          </div>

          <section class="dashboard-visuals" id="dashboardVisuals">
            <div class="kpi-grid">
              <div class="kpi-card">
                <p class="kpi-card__label">Itens cadastrados</p>
                <h3 id="kpiItemsTotal">–</h3>
                <p class="muted">Contagem total após autenticação</p>
              </div>
              <div class="kpi-card">
                <p class="kpi-card__label">Valor potencial</p>
                <h3 id="kpiTotalValue">–</h3>
                <p class="muted">Soma de quantidade x preço</p>
              </div>
              <div class="kpi-card kpi-card--alert">
                <p class="kpi-card__label">Alertas ativos</p>
                <h3 id="kpiAlertsCount">–</h3>
                <p class="muted">Itens abaixo do estoque mínimo</p>
              </div>
            </div>

            <div class="chart-grid">
              <div class="chart-card">
                <div class="chart-card__header">
                  <div>
                    <p class="chart-card__eyebrow">Visualização</p>
                    <h3>Estoque por categoria</h3>
                  </div>
                  <div class="chart-card__actions">
                    <button class="btn btn--ghost" data-export="stockByCategory" data-format="png">Exportar PNG</button>
                    <button class="btn btn--ghost" data-export="stockByCategory" data-format="csv">Exportar CSV</button>
                  </div>
                </div>
                <canvas id="stockByCategory" height="240" aria-label="Gráfico de barras de estoque por categoria"></canvas>
              </div>

              <div class="chart-card">
                <div class="chart-card__header">
                  <div>
                    <p class="chart-card__eyebrow">Tendência</p>
                    <h3>Movimentação simulada</h3>
                  </div>
                  <div class="chart-card__actions">
                    <button class="btn btn--ghost" data-export="stockTrend" data-format="png">Exportar PNG</button>
                    <button class="btn btn--ghost" data-export="stockTrend" data-format="csv">Exportar CSV</button>
                  </div>
                </div>
                <canvas id="stockTrend" height="240" aria-label="Gráfico de linha de tendência de estoque"></canvas>
              </div>

              <div class="chart-card chart-card--alerts">
                <div class="chart-card__header">
                  <div>
                    <p class="chart-card__eyebrow">Alertas</p>
                    <h3>Estoque mínimo</h3>
                  </div>
                  <div class="chart-card__actions">
                    <button class="btn btn--ghost" id="toggleAlerts">Pausar</button>
                  </div>
                </div>
                <div id="alertsList" class="alerts-list">Nenhum alerta pendente.</div>
              </div>
            </div>
          </section>

          <div class="grid grid--cta">
            <div class="cta">
              <div>
                <p class="cta__eyebrow">Cadastro rápido</p>
                <h3>Acesse a página de itens</h3>
                <p>Cadastre código, nome, quantidade e preço. Se quiser, já inclua descrição, categoria e imagem.</p>
              </div>
              <button class="btn btn--primary" data-page-target="itemsPage">Abrir</button>
            </div>

            <div class="cta">
              <div>
                <p class="cta__eyebrow">Cadastro rápido</p>
                <h3>Acesse a página de fornecedores</h3>
                <p>Cadastre CNPJ, razão social, nome do fornecedor (contato), email e telefone com validação de números.</p>
              </div>
              <button class="btn btn--primary" data-page-target="suppliersPage">Abrir</button>
            </div>
          </div>
        </section>

        <section class="card card--wide page" id="itemsPage" data-page hidden>
          <div class="card__header card__header--row">
            <div>
              <p class="hero__eyebrow">Dashboard por item</p>
              <h2>Cadastro e monitoramento</h2>
              <p class="muted">Envie imagens via blob, exporte o estoque para Excel e acompanhe o status de cada item.</p>
            </div>
            <div class="item-actions">
              <button class="btn btn--ghost" id="exportItems">Baixar Excel</button>
              <button class="btn btn--ghost" data-page-target="dashboardPage">Voltar</button>
            </div>
          </div>
          <div class="item-grid">
            <form id="itemForm" class="form item-form">
              <div class="form__row">
                <label class="form__field">
                  <span>Código *</span>
                  <input name="codigo" required />
                </label>
                <label class="form__field">
                  <span>Nome *</span>
                  <input name="nome" required />
                </label>
              </div>
              <label class="form__field">
                <span>Descrição</span>
                <textarea name="descricao" rows="2"></textarea>
              </label>
              <div class="form__row">
                <label class="form__field">
                  <span>Categoria</span>
                  <input name="categoria" />
                </label>
                <label class="form__field">
                  <span>ID do fornecedor (opcional)</span>
                  <input name="fornecedorId" inputmode="numeric" pattern="\\d*" />
                </label>
              </div>
              <div class="form__row">
                <label class="form__field">
                  <span>Quantidade *</span>
                  <input type="number" name="quantidade" min="0" step="1" required />
                </label>
                <label class="form__field">
                  <span>Preço *</span>
                  <input type="number" name="preco" min="0" step="0.01" required />
                </label>
              </div>
              <label class="form__field file-field">
                <span>Imagem do item (PNG/JPG)</span>
                <input type="file" accept="image/*" id="itemImage" />
                <small class="muted">O arquivo é convertido em blob (Data URL) e enviado junto ao payload.</small>
              </label>
              <div class="image-preview" id="itemImagePreview">Nenhuma imagem anexada.</div>
              <div class="form__actions">
                <button type="submit" class="btn btn--primary">Salvar item</button>
              </div>
            </form>

            <div class="item-dashboard">
              <div class="item-dashboard__header">
                <div>
                  <p class="hero__eyebrow">Resumo</p>
                  <h3 id="selectedItemName">Selecione um item</h3>
                  <p class="muted" id="selectedItemCode">Nenhum código carregado</p>
                </div>
              </div>
              <div class="kpi-grid kpi-grid--tight">
                <div class="kpi-card">
                  <p class="kpi-card__label">Quantidade</p>
                  <h3 id="selectedItemQtd">–</h3>
                  <p class="muted">Saldo registrado</p>
                </div>
                <div class="kpi-card">
                  <p class="kpi-card__label">Preço</p>
                  <h3 id="selectedItemPrice">–</h3>
                  <p class="muted">Último valor salvo</p>
                </div>
                <div class="kpi-card kpi-card--alert">
                  <p class="kpi-card__label">Total</p>
                  <h3 id="selectedItemTotal">–</h3>
                  <p class="muted">Qtd x Preço</p>
                </div>
              </div>
              <div class="stack">
                <div class="stack__header">
                  <h4>Itens cadastrados</h4>
                  <span class="badge" id="itemsCount">0</span>
                </div>
                <div id="itemsBoard" class="list list--cards">Nenhum item carregado.</div>
              </div>
            </div>
          </div>

          <div class="card__header card__header--row">
            <div>
              <h3>Estoque mínimo</h3>
              <p class="muted">Configure alertas por item. Valores ficam salvos no navegador.</p>
            </div>
          </div>
          <form id="thresholdForm" class="form form--inline">
            <label class="form__field">
              <span>Código do item</span>
              <input name="codigo" required />
            </label>
            <label class="form__field">
              <span>Quantidade mínima</span>
              <input type="number" name="minimo" min="0" step="1" required />
            </label>
            <label class="checkbox">
              <input type="checkbox" name="habilitado" checked />
              <span>Habilitar alerta</span>
            </label>
            <button type="submit" class="btn btn--primary">Salvar limite</button>
          </form>
        </section>

        <section class="card card--wide page" id="suppliersPage" data-page hidden>
          <div class="card__header card__header--row">
            <div>
              <h2>Cadastro de fornecedores</h2>
              <p class="muted">Campos numéricos aceitam apenas dígitos; IDs vazios são enviados como 0.</p>
            </div>
            <button class="btn btn--ghost" data-page-target="dashboardPage">Voltar</button>
          </div>
          <form id="supplierForm" class="form">
            <label class="form__field">
              <span>CNPJ *</span>
              <input name="cnpj" required maxlength="18" inputmode="numeric" autocomplete="on" />
            </label>
            <label class="form__field">
              <span>Razão social *</span>
              <input name="razaoSocial" required />
            </label>
            <label class="form__field">
              <span>Nome do fornecedor (contato) *</span>
              <input name="contato" required />
            </label>
            <label class="form__field">
              <span>Email *</span>
              <input type="email" name="email" required />
            </label>
            <label class="form__field">
              <span>Telefone *</span>
              <input name="telefone" required placeholder="(00) 00000-0000" maxlength="15" inputmode="numeric" />
            </label>
            <label class="form__field">
              <span>ID do endereço (opcional)</span>
              <input name="enderecoId" inputmode="numeric" pattern="\\d*" placeholder="0" />
            </label>
            <div class="form__actions">
              <button type="submit" class="btn btn--primary">Salvar fornecedor</button>
            </div>
          </form>
        </section>

        <section class="card card--wide page" id="customersPage" data-page hidden>
          <div class="card__header card__header--row">
            <div>
              <h2>Cadastro de clientes</h2>
              <p class="muted">Nome, data de nascimento e endereço são obrigatórios. Telefones aceitam apenas números.</p>
            </div>
            <button class="btn btn--ghost" data-page-target="dashboardPage">Voltar</button>
          </div>
          <form id="customerForm" class="form">
            <label class="form__field">
              <span>Nome *</span>
              <input name="nome" required />
            </label>
            <label class="form__field">
              <span>CPF</span>
              <input name="cpf" inputmode="numeric" pattern="\\d*" maxlength="14" placeholder="Somente números" />
            </label>
            <label class="form__field">
              <span>CNPJ</span>
              <input name="cnpj" inputmode="numeric" pattern="\\d*" maxlength="18" placeholder="Somente números" />
            </label>
            <label class="form__field">
              <span>Email</span>
              <input type="email" name="email" placeholder="Opcional" />
            </label>
            <label class="form__field">
              <span>Data de nascimento *</span>
              <input type="date" name="dataNascimento" required />
            </label>
            <label class="form__field">
              <span>ID do endereço *</span>
              <input name="enderecoId" required inputmode="numeric" pattern="\\d*" />
            </label>
            <label class="form__field">
              <span>Telefone do cliente</span>
              <input name="telefone" inputmode="numeric" maxlength="15" placeholder="(00) 00000-0000" />
            </label>
            <div class="form__actions">
              <button type="submit" class="btn btn--primary">Salvar cliente</button>
            </div>
          </form>
        </section>

        <section class="card card--wide page" id="addressesPage" data-page hidden>
          <div class="card__header card__header--row">
            <div>
              <h2>Cadastro de endereços</h2>
              <p class="muted">Ao deixar campos numéricos em branco, o valor 0 é enviado.</p>
            </div>
            <button class="btn btn--ghost" data-page-target="dashboardPage">Voltar</button>
          </div>
          <form id="addressForm" class="form">
            <label class="form__field">
              <span>CEP</span>
              <input name="cep" inputmode="numeric" pattern="\\d*" maxlength="9" placeholder="Somente números" />
            </label>
            <label class="form__field">
              <span>Rua</span>
              <input name="rua" />
            </label>
            <label class="form__field">
              <span>Número</span>
              <input name="numero" inputmode="numeric" pattern="\\d*" placeholder="0" />
            </label>
            <label class="form__field">
              <span>Bairro</span>
              <input name="bairro" />
            </label>
            <label class="form__field">
              <span>Cidade</span>
              <input name="cidade" />
            </label>
            <label class="form__field">
              <span>Estado</span>
              <input name="estado" maxlength="2" placeholder="UF" />
            </label>
            <label class="form__field">
              <span>Complemento</span>
              <input name="complemento" />
            </label>
            <div class="form__actions">
              <button type="submit" class="btn btn--primary">Salvar endereço</button>
            </div>
          </form>
        </section>

        <section class="card card--wide page" id="phonesPage" data-page hidden>
          <div class="card__header card__header--row">
            <div>
              <h2>Cadastro de telefones</h2>
              <p class="muted">Vincule um telefone já formatado a um cliente existente.</p>
            </div>
            <button class="btn btn--ghost" data-page-target="dashboardPage">Voltar</button>
          </div>
          <form id="phoneForm" class="form">
            <label class="form__field">
              <span>Telefone *</span>
              <input name="numero" required inputmode="numeric" maxlength="15" placeholder="(00) 00000-0000" />
            </label>
            <label class="form__field">
              <span>ID do cliente *</span>
              <input name="clienteId" required inputmode="numeric" pattern="\\d*" />
            </label>
            <div class="form__actions">
              <button type="submit" class="btn btn--primary">Salvar telefone</button>
            </div>
          </form>
        </section>
      </main>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="main.js"></script>
</body>
</html>
